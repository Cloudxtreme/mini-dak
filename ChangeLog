2007-11-30  Guillem Jover  <guillem@debian.org>

	* archive-reindex-meta: Fix typo 'archive_keyring' ->
	'archive_keyrings'.

2007-11-15  Guillem Jover  <guillem@debian.org>

	* archive.conf (archive_push_mirrors): Change
	'mirror@farad.aurel32.net' to 'gnuab@hall.aurel32.net'.

2007-11-03  Guillem Jover  <guillem@debian.org>

	* archive-snapshot: Snapshot arch:all packages which are on pool/.

2007-08-17  Guillem Jover  <guillem@debian.org>

	* archive-stats: Coalesce all remaining versions from unreleased into
	a magic '<version>' string.

2007-08-17  Guillem Jover  <guillem@debian.org>

	* archive.conf (archive_push_mirrors): Add 'mirror@debian.ethz.ch'.

2007-08-03  Guillem Jover  <guillem@debian.org>

	* archive.conf (archive_push_mirrors): Add 'mirror@farad.aurel32.net'.

2007-07-22  Guillem Jover  <guillem@debian.org>

	* archive-setup (create_apt_config): Limit Contents file generation
	to 25000 KiB per day.

2007-07-20  Guillem Jover  <guillem@debian.org>

	* archive-reindex-files: Append the mirror contents into the
	.lists.new files.

2007-07-20  Guillem Jover  <guillem@debian.org>

	* archive-install: Move archive-mirror-arch-all call before
	archive-reindex-files, as the latter requires the generated mirror
	files.

2007-07-20  Guillem Jover  <guillem@debian.org>

	* archive.conf (debian_archive): Switch from jane.uab.es to
	ftp.es.debian.org, as the latter supports rsync.
	* archive-mirror-arch-all (mirror): Remove variable. Make rsync use
	debian_archive instead, adapting the URL to remove 'debian/'.
	* archive-lists: Prefix debian_archive with the protocol.

2007-07-20  Guillem Jover  <guillem@debian.org>

	* archive-mirror-arch-all: Add a mass removal protector.

2007-07-20  Guillem Jover  <guillem@debian.org>

	* archive-mirror-arch-all: Remove '--progress' from rsync commands.

2007-07-20  Guillem Jover  <guillem@debian.org>

	* archive-mirror-arch-all: Remove trailing './' from pool.list.

2007-07-20  Guillem Jover  <guillem@debian.org>

	* archive-mirror-arch-all: Remove trailing './' from file paths.

2007-07-20  Guillem Jover  <guillem@debian.org>

	* archive-reindex-files: Fix indentation.

2007-07-20  Guillem Jover  <guillem@debian.org>

	* archive-mirror-arch-all (idx_filtered_file): Change file name.
	Add more options to rsync. Add '-f' to rm, to handle the empty
	list case. Move file list merging to ...
	* archive-reindex-files: ... here. to make it idempotent.

2007-07-20  Guillem Jover  <guillem@debian.org>

	* archive-mirror-arch-all: Support mirroring arch:all packages from
	the master archive.
	* archive-install: Call archive-mirror-arch-all after
	archive-reindex-files.

2007-07-20  Guillem Jover  <guillem@debian.org>

	* archive-reindex: Split into ...
	* archive-reindex-files: ... this and ...
	* archive-reindex-meta: ... this. Fix all callers.

2007-07-20  Guillem Jover  <guillem@debian.org>

	* archive-mirrors-push: Rename to ...
	* archive-mirror-push: ... this. Fix all callers.

2007-07-20  Guillem Jover  <guillem@debian.org>

	* archive-queue (verify_multiarch_changes): Reject .changes files
	with only arch:all packages when using the multipool option.

2007-07-17  Guillem Jover  <guillem@debian.org>

	* archive-lib (get_suite_codename): Do not fail if codename not found,
	just return the suite.

2007-07-17  Guillem Jover  <guillem@debian.org>

	* archive-lib (get_suite_codename): New function.
	* archive-reindex: Set APT::FTPArchive::Release::Codename with
	get_suite_codename.

2007-04-28  Guillem Jover  <guillem@debian.org>

	* archive.conf (arch_list_unstable): Add armel.
	(arch_list_unreleased): Likewise.
	(arch_list_experimenta): Likewise.

2007-04-28  Guillem Jover  <guillem@debian.org>

	* archive.conf (suite_alias): Updated the aliases to reflect the
	release of etch, now lenny is testing.

2007-02-08  Guillem Jover  <guillem@debian.org>

	* archive.conf (archive_keyid): Update to 2007 signing key.

2007-02-08  Guillem Jover  <guillem@debian.org>

	* archive-snapshot: New file.
	* crontab: Add an entry for archive-snapshot.

2007-01-19  Guillem Jover  <guillem@debian.org>

	* archive-mirrors-push: New file.
	* archive-install: Call archive-mirrors-push.
	* archive.conf (archive_push_mirrors): New variable.

2007-01-09  Guillem Jover  <guillem@debian.org>

	* archive-obsolete-pkg (obslete_pkg_arch): Change confirmation reply
	from 'yes' to 'y', to ease maintenance work and enable to use the yes
	command.

2006-11-12  Guillem Jover  <guillem@debian.org>

	* archive-stats: Silent the .changes output, so that the cron does
	not send massive mails.

2006-10-18  Guillem Jover  <guillem@debian.org>

	* archive-stats: Print the .changes files for the unreleased suite
	into a log file, for easy tracking.

2006-08-18  Guillem Jover  <guillem@debian.org>

	* README: DAK is no longer Katie.
	* archive-lists: Likewise.

2006-08-18  Guillem Jover  <guillem@debian.org>

	* archive-stats: Merge hack type stats into the pkg number stats loop.

2006-08-18  Guillem Jover  <guillem@debian.org>

	* archive-stats: Filter real arches from unreleased.

2006-08-18  Guillem Jover  <guillem@debian.org>

	* archive-stats: Add stats for hack type, based on the version
	suffixes.

2006-08-18  Guillem Jover  <guillem@debian.org>

	* archive-obsolete-pkg: Support obsoleting a package in all arches in
	the archive by specifying arch any.
	(obsolete_pkg_arch): New function.

2006-08-18  Guillem Jover  <guillem@debian.org>

	* archive-install: Hook archive-stats in if packages are installed.

2006-08-18  Guillem Jover  <guillem@debian.org>

	* archive-stats: Output the statistics to a new stats log file.

2006-08-18  Guillem Jover  <guillem@debian.org>

	* archive-stats: Print number of source package per arch.

2006-08-18  Guillem Jover  <guillem@debian.org>

	* archive-obsolete-pkg: Do not bail out if a packages cannot be found
	in the pool.

2006-08-01  Guillem Jover  <guillem@debian.org>

	* archive-lib (fetch_source_name): New function.
	(changes_canonic): Use the new function fetch_source_name with
	the new .changes Source field format for binNMUs.
	* archive-install (pool_install): Likewise.

2006-05-22  Guillem Jover  <guillem@debian.org>

	* archive.conf: Reorder. Add few comments explaining variables.

2006-05-22  Guillem Jover  <guillem@debian.org>

	* README: New file.

2006-05-22  Petr Salinger  <petr.salinger@t-systems.cz>

	* archive-lib (changes_obsolete): Fix auto obsoleting by checking
	for the distribution stack order, even if for now experimental is
	hardcoded.

2006-02-27  Guillem Jover  <guillem@debian.org>

	* archive.conf (arch_list_unstable): Remove knetbsd-i386. Add
	kfreebsd-amd64.
	(arch_list_unreleased): Likewise.
	(arch_list_experimental): Likewise.

2006-02-15  Guillem Jover  <guillem@debian.org>

	* archive-obsolete: Generate an ls-lR.gz file.

2006-02-15  Guillem Jover  <guillem@debian.org>

	* archive.conf (archive_keyid, GNUPGHOME): New variables.
	* archive-reindex: Make gpg use archive_reindex instead of
	archive_maint.

2006-02-14  Guillem Jover  <guillem@debian.org>

	* archive-reindex: Support hardcoded NotAutomatic field in Releases
	files for experimental.

2006-02-14  Guillem Jover  <guillem@debian.org>

	* archive-obsolete-pkg: Change arguments to (arch, pkgname, ...).
	Do not specify REPLY to read.

2006-02-14  Guillem Jover  <guillem@debian.org>

	* TODO: Add new items.

2006-02-14  Guillem Jover  <guillem@debian.org>

	* archive.conf (arch_list_experimental): Remove source.

2005-12-14  Guillem Jover  <guillem@debian.org>

	* archive-changes-lists: Move changes.list generation code to ...
	* archive-pool-split: ... here.

2005-12-14  Guillem Jover  <guillem@debian.org>

	* archive-lib (poolize_hash_name): Optimize by using only one s///.
	Thanks to Adeodato Simó <adeodato@debian.org>.

2005-11-15  Guillem Jover  <guillem@debian.org>

	* archive-setup (create_repo): Set NoAutomatic to yes if the suite
	is experimental (should be generalized afterwards).

2005-11-15  Guillem Jover  <guillem@debian.org>

	* archive.conf (suite_list): Add experimental.
	(arch_list_experimental): New variable.
	* archive-lists: Symlink overrides for experimental from sid.
	* archive-lib (changes_obsolete): Compare suites again (although this
	makes obsoleting from unreleased in relation to unstable not work
	anymore).

2005-09-26  Guillem Jover  <guillem@debian.org>

	* TODO: Add subversion Id keyword.

2005-09-06  Guillem Jover  <guillem@debian.org>

	* archive-obsolete: Pass changes_obsolete output through uniq.

2005-09-04  Guillem Jover  <guillem@debian.org>

	* archive-quinn: Add missing " at the final echo_time.

2005-08-31  Guillem Jover  <guillem@debian.org>

	* archive-install: Remove archive-changes-lists call after
	archive-obsolete.
	* archive-obsolete: Update .changes files list after obsoleting.

2005-08-31  Guillem Jover  <guillem@debian.org>

	* archive-lists: Force symlinking the override files.

2005-08-31  Guillem Jover  <guillem@debian.org>

	* archive-lists: Make wget quiet.

2005-08-31  Guillem Jover  <guillem@debian.org>

	* archive-lib (changes_obsolete): Print the smallest package version
	in the else case.

2005-08-30  Guillem Jover  <guillem@debian.org>

	* archive-lists: Change dir to cache_dir to fix files not found. Move
	changes lists generation to ...
	* archive-changes-lists: ... here.
	* archive-install: Call archive-changes-lists before and after
	archive-obsolete.

2005-08-30  Guillem Jover  <guillem@debian.org>

	* archive-lib (changes_newest): Remove buggy function.
	(changes_obsolete): Do not compare the suite as we assume that there
	are only unstable and unreleased, mergerd anyway at obsoleting time.
	* archive-stats: Disable line using changes_newest.
	* archive-install: Call archive-obsolete after archive-lists.
	* TODO: Remove auto obsoleting item.

2005-08-30  Guillem Jover  <guillem@debian.org>

	* archive-obsolete: Replace simple echos with log.

2005-08-30  Guillem Jover  <guillem@debian.org>

	* archive-reindex: Move .changes generation code to ...
	* archive-lists: ... here. New file.
	* archive-quinn: Use get_suite_arches instead of the private variable
	name. Move retrieval of official package lists to ...
	* archive-lists: ... here.
	* archive-install: Call archive-lists before archive-reindex.

2005-08-30  Guillem Jover  <guillem@debian.org>

	* archive-setup: Implement debian-installer repo support.
	* TODO: Remove debian-installer item.

2005-08-30  Guillem Jover  <guillem@debian.org>

	* archive-setup: Do not touch dummy override files. Always create the
	indices dir.

2005-08-27  Guillem Jover  <guillem@debian.org>

	* archive-obsolete: Implement .changes content obsoleting.

2005-08-26  Guillem Jover  <guillem@debian.org>

	* archive-quinn: Force gunzipping the override files.

2005-08-26  Guillem Jover  <guillem@debian.org>

	* archive-setup (create_apt_config): Remove gzip extension from
	override files.
	* archive-quinn: Unzip compressed override files and symlink
	those instead.

2005-08-26  Guillem Jover  <guillem@debian.org>

	* archive-setup (create_apt_config): Add override file variables.
	* archive-quinn: Link unreleased overrides to the unstable ones.

2005-08-26  Guillem Jover  <guillem@debian.org>

	* archive-obsolete: Specify that the obsolete list is of packages.
	Added spaces before the ellipsis. Fix a typo.

2005-08-25  Guillem Jover  <guillem@debian.org>

	* archive-obsolete-pkg: List all changes files prior to asking for
	individual removal.

2005-08-24  Guillem Jover  <guillem@debian.org>

	* archive-obsolete: Use changes_obsolete instead of changes_newest,
	and dump to the proper list files.

2005-08-23  Guillem Jover  <guillem@debian.org>

	* archive-quinn: Add override retrieval support.

2005-08-23  Guillem Jover  <guillem@debian.org>

	* archive-obsolete: Initial implementation of splitted pool
	obsoleting.

2005-08-03  Guillem Jover  <guillem@debian.org>

	* ChangeLog: New file.
	* archive.conf (multipool): Set to yes.
	* archive-lib (get_pool_dir_arch): New function.
	(changes_canonic): Use filter_real_arches.
	* archive-reindex: Create changes file lists per arch. Generate a
	changes.list for backward compatibility. Split deb and udeb in the
	file list generation. Create file lists from each arch changes list.
	Remove handling of arch all file lists. Remove the Release files
	just before moving the new one on top.

